<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Registration</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/style.css">
</head>

<body class="bg-dark text-light d-flex align-items-center justify-content-center" style="height:100vh">

<!-- ğŸŒ™ Dark Mode Toggle -->
<button onclick="toggleTheme()"
        class="btn btn-sm btn-outline-light"
        style="position:fixed; top:15px; left:15px;">
    ğŸŒ™
</button>

<div class="card bg-secondary shadow-lg p-4" style="width:380px">

    <h3 class="text-center mb-3">ğŸ›¡ï¸ Admin Registration</h3>

    <form onsubmit="registerAdmin(event)">
        <div class="mb-3">
            <label>Admin ID</label>
            <input id="user_id" class="form-control" placeholder="admin001" required>
        </div>

        <div class="mb-3">
            <label>Email</label>
            <input id="email" type="email" class="form-control" required>
        </div>

        <div class="mb-3">
            <label>Password</label>
            <input id="password" type="password" class="form-control" required>
        </div>

        <button class="btn btn-warning w-100">Register Admin</button>
    </form>

    <div class="text-center mt-3">
        <hr>
        <p class="mb-2">Already an admin?</p>
        <a href="/login" class="btn btn-outline-light btn-sm">
            ğŸ” Admin Login
        </a>
    </div>
</div>

<script>
async function registerAdmin(e) {
    e.preventDefault();

    const payload = {
        user_id: user_id.value,
        email: email.value,
        password: password.value,
        role: "admin"
    };

    const res = await fetch("/api/auth/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
    });

    const data = await res.json();

    if (res.ok) {
        alert("Admin registered successfully. You can login now.");
        window.location.href = "/login";
    } else {
        alert(data.error || "Registration failed");
    }
}

/* ğŸŒ™ Dark Mode */
function applyTheme() {
    document.body.classList.toggle(
        "dark-mode",
        localStorage.getItem("theme") === "dark"
    );
}
function toggleTheme() {
    const isDark = document.body.classList.toggle("dark-mode");
    localStorage.setItem("theme", isDark ? "dark" : "light");
}
applyTheme();
</script>

</body>
</html>
