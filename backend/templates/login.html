<!DOCTYPE html>
<html>
<head>
    <title>Admin Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/style.css" rel="stylesheet">
</head>

<body class="d-flex justify-content-center align-items-center">

<button onclick="toggleTheme()" class="btn btn-sm btn-outline-secondary position-fixed top-0 start-0 m-3">üåô</button>

<div class="glass-card p-4" style="width:360px">
    <h3 class="text-center mb-4">üõ°Ô∏è Admin Login</h3>

    <form onsubmit="login(event)">
        <input id="email" class="form-control mb-3" placeholder="Admin Email" required>
        <input id="password" type="password" class="form-control mb-3" placeholder="Password" required>

        <button class="btn btn-primary w-100">Login</button>
    </form>

    <div class="divider"></div>

    <a href="/admin-register" class="btn btn-outline-light w-100">‚ûï Register Admin</a>
</div>

<script>
async function login(e){
    e.preventDefault();
    const res = await fetch("/api/auth/login", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify({ email: email.value, password: password.value })
    });
    const data = await res.json();

    if(res.ok){
        localStorage.setItem("token", data.token);
        localStorage.setItem("role", data.role);
        window.location.href="/admin";
    } else alert(data.error);
}

function toggleTheme(){
    document.body.classList.toggle("dark-mode");
}
</script>
</body>
</html>
